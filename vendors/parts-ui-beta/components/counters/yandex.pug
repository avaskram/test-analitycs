mixin ym-counter(id)
  script.
     (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
     m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
     (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

     ym(!{JSON.stringify(id)}, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true,
        webvisor:true
     });
  noscript
    div
      img(src="https://mc.yandex.ru/watch/"+id style="position:absolute; left:-9999px;" alt="")

mixin yandex-metrika(id)
  script.
    (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
      try {
        w.yaCounter!{JSON.stringify(id)} = new Ya.Metrika2({
          id:!{JSON.stringify(id)},
          clickmap:true,
          trackLinks:true,
          accurateTrackBounce:true,
          webvisor:true
        });
      } catch(e) { }
      });
      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/tag.js";
      
      if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
    })(document, window, "yandex_metrika_callbacks2");
    
  noscript
    div
      img(src='https://mc.yandex.ru/watch/'+id, style='position:absolute; left:-9999px;', alt='')

